<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Flow Diagram - Assessment Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #0b1020;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 700;
        }
        
        canvas {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            background: #fafafa;
        }
        
        .legend {
            margin-top: 30px;
            padding: 20px;
            background: #f5f7fa;
            border-radius: 8px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        
        .legend-text {
            font-size: 14px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Assessment Quiz Website Flow</h1>
        <canvas id="flowCanvas" width="1300" height="800"></canvas>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #3b82f6;"></div>
                <div class="legend-text">User Pages</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #10b981;"></div>
                <div class="legend-text">API/Processing</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f59e0b;"></div>
                <div class="legend-text">Admin Pages</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #8b5cf6;"></div>
                <div class="legend-text">Database</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('flowCanvas');
        const ctx = canvas.getContext('2d');
        
        // Colors
        const userPageColor = '#3b82f6';
        const apiColor = '#10b981';
        const adminColor = '#f59e0b';
        const dbColor = '#8b5cf6';
        const arrowColor = '#374151';
        const textColor = '#1f2937';
        
        // Node definitions
        const nodes = [
            // User Flow
            { id: 'start', x: 100, y: 100, w: 180, h: 80, text: 'START\n(Entry Point)', color: '#e5e7eb', type: 'start' },
            { id: 'index', x: 100, y: 250, w: 180, h: 100, text: 'index.php\nRegistration Form\n(Name, Role, Level,\nPlace, Phone, Email)', color: userPageColor, type: 'user' },
            { id: 'check', x: 100, y: 420, w: 180, h: 80, text: 'check_user_attempt.php\n(AJAX Validation)', color: apiColor, type: 'api' },
            { id: 'quiz', x: 400, y: 250, w: 180, h: 100, text: 'quiz.php\nQuiz Interface\n(50 Questions,\nTimer, Pagination)', color: userPageColor, type: 'user' },
            { id: 'submit', x: 400, y: 420, w: 180, h: 80, text: 'submit_quiz.php\nProcess Answers', color: apiColor, type: 'api' },
            { id: 'result', x: 700, y: 250, w: 180, h: 100, text: 'show_result.php\nDisplay Results\n(Score, Correct/\nWrong Answers)', color: userPageColor, type: 'user' },
            { id: 'end', x: 700, y: 100, w: 180, h: 80, text: 'END\n(Assessment Complete)', color: '#e5e7eb', type: 'end' },
            
            // Admin Flow
            { id: 'admin_view', x: 100, y: 600, w: 180, h: 80, text: 'admin_view.php\nView All Users', color: adminColor, type: 'admin' },
            { id: 'admin_result', x: 400, y: 600, w: 180, h: 80, text: 'admin_result.php\nView User Results', color: adminColor, type: 'admin' },
            { id: 'admin_server', x: 700, y: 600, w: 180, h: 80, text: 'admin_result_server.php\nAPI Endpoint', color: apiColor, type: 'api' },
            
            // Database
            { id: 'db', x: 1000, y: 400, w: 200, h: 200, text: 'MySQL Database\n\n• users\n• responses\n• backend_mcq_questions\n• python_mcq_questions\n• flutter_mcq_questions\n• mern_mcq_questions\n• fullstack_mcq_questions', color: dbColor, type: 'db' },
            
            // Supporting files
            { id: 'db_conn', x: 1000, y: 250, w: 180, h: 60, text: 'db.php\nDatabase Connection', color: apiColor, type: 'api' },
            { id: 'config', x: 1000, y: 150, w: 180, h: 60, text: 'config.php\nEnvironment Config', color: apiColor, type: 'api' },
        ];
        
        // Connections (from, to, label, style)
        const connections = [
            // Main user flow
            ['start', 'index', 'User visits site'],
            ['index', 'check', 'Submit Form\n(AJAX)'],
            ['check', 'quiz', 'Valid User\n(No duplicate)'],
            ['quiz', 'submit', 'Submit Answers'],
            ['submit', 'result', 'Process Complete'],
            ['result', 'end', 'View Results'],
            
            // Error/duplicate flow
            ['check', 'index', 'Duplicate Found\n(Redirect)', 'dashed'],
            
            // Admin flow
            ['admin_view', 'admin_result', 'Select User'],
            ['admin_result', 'admin_server', 'Fetch Data'],
            
            // Database connections
            ['index', 'db', 'Save User Data'],
            ['check', 'db', 'Check User'],
            ['quiz', 'db', 'Fetch Questions'],
            ['submit', 'db', 'Save Responses'],
            ['result', 'db', 'Fetch Results'],
            ['admin_view', 'db', 'Fetch Users'],
            ['admin_result', 'db', 'Fetch Responses'],
            ['admin_server', 'db', 'Query Data'],
            ['db_conn', 'db', 'Connection'],
            ['config', 'db_conn', 'Config'],
        ];
        
        // Draw functions
        function drawNode(node) {
            const { x, y, w, h, text, color } = node;
            
            // Draw shadow
            ctx.fillStyle = 'rgba(0,0,0,0.1)';
            ctx.fillRect(x + 3, y + 3, w, h);
            
            // Draw node
            ctx.fillStyle = color;
            ctx.fillRect(x, y, w, h);
            
            // Draw border
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 2;
            ctx.strokeRect(x, y, w, h);
            
            // Draw text
            ctx.fillStyle = node.type === 'db' || node.type === 'start' || node.type === 'end' ? '#ffffff' : textColor;
            ctx.font = node.type === 'db' ? 'bold 12px Segoe UI' : 'bold 13px Segoe UI';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const lines = text.split('\n');
            const lineHeight = node.type === 'db' ? 18 : 16;
            const startY = y + h / 2 - (lines.length - 1) * lineHeight / 2;
            
            lines.forEach((line, i) => {
                ctx.fillText(line, x + w / 2, startY + i * lineHeight);
            });
        }
        
        function drawArrow(from, to, label, style = 'solid') {
            const fromNode = nodes.find(n => n.id === from);
            const toNode = nodes.find(n => n.id === to);
            
            if (!fromNode || !toNode) return;
            
            // Calculate connection points
            let x1, y1, x2, y2;
            
            // Determine connection points based on relative positions
            if (toNode.x > fromNode.x + fromNode.w) {
                // Right side
                x1 = fromNode.x + fromNode.w;
                y1 = fromNode.y + fromNode.h / 2;
                x2 = toNode.x;
                y2 = toNode.y + toNode.h / 2;
            } else if (toNode.x + toNode.w < fromNode.x) {
                // Left side
                x1 = fromNode.x;
                y1 = fromNode.y + fromNode.h / 2;
                x2 = toNode.x + toNode.w;
                y2 = toNode.y + toNode.h / 2;
            } else if (toNode.y > fromNode.y + fromNode.h) {
                // Bottom
                x1 = fromNode.x + fromNode.w / 2;
                y1 = fromNode.y + fromNode.h;
                x2 = toNode.x + toNode.w / 2;
                y2 = toNode.y;
            } else {
                // Top
                x1 = fromNode.x + fromNode.w / 2;
                y1 = fromNode.y;
                x2 = toNode.x + toNode.w / 2;
                y2 = toNode.y + toNode.h;
            }
            
            // Draw line
            ctx.strokeStyle = style === 'dashed' ? '#ef4444' : arrowColor;
            ctx.lineWidth = 2;
            ctx.setLineDash(style === 'dashed' ? [5, 5] : []);
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            
            // Add curve for better visualization
            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            ctx.quadraticCurveTo(midX, y1, midX, midY);
            ctx.quadraticCurveTo(midX, y2, x2, y2);
            
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw arrowhead
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLength = 10;
            const arrowAngle = Math.PI / 6;
            
            ctx.fillStyle = style === 'dashed' ? '#ef4444' : arrowColor;
            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(
                x2 - arrowLength * Math.cos(angle - arrowAngle),
                y2 - arrowLength * Math.sin(angle - arrowAngle)
            );
            ctx.lineTo(
                x2 - arrowLength * Math.cos(angle + arrowAngle),
                y2 - arrowLength * Math.sin(angle + arrowAngle)
            );
            ctx.closePath();
            ctx.fill();
            
            // Draw label if provided
            if (label) {
                ctx.fillStyle = style === 'dashed' ? '#ef4444' : '#6b7280';
                ctx.font = '11px Segoe UI';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                const labelX = (x1 + x2) / 2;
                const labelY = (y1 + y2) / 2 - 10;
                
                // Background for label
                const labelLines = label.split('\n');
                const labelWidth = Math.max(...labelLines.map(l => ctx.measureText(l).width)) + 8;
                const labelHeight = labelLines.length * 14 + 4;
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.fillRect(labelX - labelWidth / 2, labelY - labelHeight / 2, labelWidth, labelHeight);
                ctx.strokeStyle = '#d1d5db';
                ctx.lineWidth = 1;
                ctx.strokeRect(labelX - labelWidth / 2, labelY - labelHeight / 2, labelWidth, labelHeight);
                
                ctx.fillStyle = style === 'dashed' ? '#ef4444' : '#374151';
                labelLines.forEach((line, i) => {
                    ctx.fillText(line, labelX, labelY - labelHeight / 2 + 10 + i * 14);
                });
            }
        }
        
        // Draw everything
        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw connections first (so nodes appear on top)
            connections.forEach(([from, to, label, style]) => {
                drawArrow(from, to, label, style);
            });
            
            // Draw nodes
            nodes.forEach(node => {
                drawNode(node);
            });
        }
        
        // Initial draw
        draw();
        
        // Make canvas responsive
        function resizeCanvas() {
            const container = canvas.parentElement;
            const maxWidth = container.clientWidth - 60;
            const aspectRatio = 1300 / 800;
            
            if (maxWidth < 1300) {
                canvas.style.width = maxWidth + 'px';
                canvas.style.height = (maxWidth / aspectRatio) + 'px';
            } else {
                canvas.style.width = '1300px';
                canvas.style.height = '800px';
            }
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
    </script>
</body>
</html>




